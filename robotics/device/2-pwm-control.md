# PWM
PWM(Pulse Width Modulation)とは、半導体を使った電力を制御する方式の１つです。
オンとオフの繰り返しスイッチングを行い、出力される電力を制御する。

一定電圧の入力から、パルス列のオンとオフの一定周期を作り、オンの時間幅を変化させる電力制御方式をPWMと呼びます。

早い周期でスイッチングを行うことで、オンのパルス幅に比例した任意の電圧が得られる。
半導体がオンとオフ状態が最も損失が少ない(中間状態は損失多い)ことを利用した電力制御方式です。

## PWM制御
PWM制御とは、高速スイッチングによりパルス波形を生成し、パルスのHi時間を変化させることで、出力される平均電力を制御する方式です。
Pulse Width Modulationの略。

![alt text](image/2/1.png)


### 用途
モータ制御、LEDの兆候、スイッチングレギュレータ

PWMは、優れた制御性と、高効率が特長で、インバーター回路で広く使われている技術です。
ブラシ付きDCモーターの回転制御にも使われています。
インバーター回路にて、PWM制御のオンの時間幅(デューティー)を周期的に変化させることにより、モーター駆動に最適な正弦波の交流電圧を作ることができます。

## PWM制御の基本原理

PWM制御は、方形波の周波数を固定し、電圧がHiの時間の割合を変えることで負荷にかかる電力を制御します。
方形波の一周期のうちのHiになっている時間の割合をDUTY（デューティ）と呼びます。

例えば、100kHz(周期が10us)の方形波で、Hiの期間が6usなら、DUTY比:Dは、

D = 6us / 10us = 60%

となります。
DUTY比を制御していることから、DUTY制御と呼ばれることもあります。


PWM信号を用いて、具体的にどのような制御をしているのか、実際のアプリケーションを３つ挙げて説明していきます。

## 従来課題
はじめに基本となるリニア制御（DC制御）について説明します。
リニア制御はモータを制御するための最も基本的な方式で、モータに印加する電圧を変えることで回転数を変化させます。
リニア制御は、下図のような回路です。
可変抵抗の値を変えることでモータにかかる電圧を変えることができます。
回路は単純ですが、モータに印加する電圧を低くするほどトランジスタのCE間電圧が広がるため、発生する損失、発熱が大きくなってしまうという問題があります。
![alt text](image/2/2.png)

## 解決技術
モータにかかる電圧は一定で、PWM信号でモータの下端のスイッチ（トランジスタ）のオン・オフを切り替えます。
制御用トランジスタはフルオンかフルオフしている状態で使うため、リニア制御に比べると損失がかなり小さくできます。
モータのインダクタンスを22uH、端子間抵抗を3Ω、印加電圧:VIN=3.7Vの条件でシミュレーションをしてみましょう。

![alt text](image/2/3.png)
